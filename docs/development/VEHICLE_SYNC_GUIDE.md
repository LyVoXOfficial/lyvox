# üöó –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ Vehicle Data

> –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–∞—Ä–æ–∫ –∏ –º–æ–¥–µ–ª–µ–π –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –º–µ–∂–¥—É `vehicles_full_enriched2.json` –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

## üìã –û–±–∑–æ—Ä –∑–∞–¥–∞—á–∏

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å –≤—Å–µ –º–∞—Ä–∫–∏ –∏ –º–æ–¥–µ–ª–∏ –∏–∑ JSON —Ñ–∞–π–ª–∞, –Ω–∞—á–∏–Ω–∞—è —Å 1980 –≥–æ–¥–∞, —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ –Ω–∞ –≤—Å–µ —è–∑—ã–∫–∏ (RU, EN, NL, FR, DE).

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:**

- ‚úÖ –í—Å–µ –º–∞—Ä–∫–∏ —Å –º–æ–¥–µ–ª—è–º–∏ >= 1980 –≥–æ–¥–∞ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –ë–î
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- ‚úÖ –ü–µ—Ä–µ–≤–æ–¥—ã –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
- ‚úÖ –î–∞–Ω–Ω—ã–µ insights (pros, cons, tips) –¥–æ—Å—Ç—É–ø–Ω—ã

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### JSON —Ñ–∞–π–ª: `seed/vehicles_full_enriched2.json`

```json
{
  "makes": [
    {
      "slug": "bmw",
      "name_en": "BMW",
      "country": "Germany",
      "models": [
        {
          "slug": "3-series",
          "name_en": "3 Series",
          "first_model_year": 1975,
          "last_model_year": 2024,
          "years_available": [1975, 1980, 1985, ...],
          "generations": [...],
          "insight": {
            "pros": [...],
            "cons": [...],
            "inspection_tips": [...]
          }
        }
      ]
    }
  ]
}
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase)

**–¢–∞–±–ª–∏—Ü—ã:**

- `vehicle_makes` - –º–∞—Ä–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- `vehicle_models` - –º–æ–¥–µ–ª–∏
- `vehicle_generations` - –ø–æ–∫–æ–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π
- `vehicle_insights` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `vehicle_make_i18n` - –ø–µ—Ä–µ–≤–æ–¥—ã –º–∞—Ä–æ–∫
- `vehicle_model_i18n` - –ø–µ—Ä–µ–≤–æ–¥—ã –º–æ–¥–µ–ª–µ–π
- `vehicle_generation_i18n` - –ø–µ—Ä–µ–≤–æ–¥—ã –ø–æ–∫–æ–ª–µ–Ω–∏–π

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export DATABASE_URL="postgresql://..."
export SUPABASE_DB_URL="postgresql://..."

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å master-—Å–∫—Ä–∏–ø—Ç
node scripts/sync-vehicles-master.mjs --apply
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ—à–∞–≥–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

```bash
# –®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
node scripts/analyze-vehicle-sync.mjs

# –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
node scripts/check-vehicle-duplicates.mjs

# –®–∞–≥ 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è seed —Ñ–∞–π–ª–∞
node scripts/generateVehicleSeed.mjs

# –®–∞–≥ 4: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ –ë–î
node scripts/runSeed.mjs ./vehicles_seed.sql

# –®–∞–≥ 5: –ü–µ—Ä–µ–≤–æ–¥—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# 5a. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (RU -> EN)
DATABASE_URL="..." OPENAI_API_KEY="..." node scripts/vehicle_i18n_normalize.mjs

# 5b. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã (–≤—Å–µ —è–∑—ã–∫–∏)
DATABASE_URL="..." GOOGLE_API_KEY="..." node scripts/vehicle_i18n_expand.mjs

# –®–∞–≥ 6: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
node scripts/analyze-vehicle-sync.mjs
```

---

## üìö –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤

### 1. `analyze-vehicle-sync.mjs`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–Ω–∞–ª–∏–∑ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ JSON —Å –ë–î

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –º–∞—Ä–∫–∏/–º–æ–¥–µ–ª–∏ –≤ JSON (—Å —Ñ–∏–ª—å—Ç—Ä–æ–º >= 1980)
- –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –º–∞—Ä–∫–∏/–º–æ–¥–µ–ª–∏ –≤ –ë–î
- –í—ã—è–≤–ª—è–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–µ—Ä–µ–≤–æ–¥–æ–≤

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ JSON (>= 1980):
   ‚úÖ –ú–∞—Ä–æ–∫: 245
   ‚úÖ –ú–æ–¥–µ–ª–µ–π: 3421
   ‚úÖ –ü–æ–∫–æ–ª–µ–Ω–∏–π: 8932

üóÑÔ∏è  –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î:
   –ú–∞—Ä–æ–∫: 180
   –ú–æ–¥–µ–ª–µ–π: 2567
   –ü–æ–∫–æ–ª–µ–Ω–∏–π: 6234

‚ùå –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –º–∞—Ä–∫–∏: 65
‚ùå –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏: 854
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
DATABASE_URL="..." node scripts/analyze-vehicle-sync.mjs
```

---

### 2. `check-vehicle-duplicates.mjs`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ –ë–î

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:**

- –î—É–±–ª–∏–∫–∞—Ç—ã –ø–æ `slug` –≤ `vehicle_makes`
- –î—É–±–ª–∏–∫–∞—Ç—ã –ø–æ `(make_id, slug)` –≤ `vehicle_models`
- –î—É–±–ª–∏–∫–∞—Ç—ã –ø–æ `name_en` (case-insensitive)
- –°–∏—Ä–æ—Ç—ã (orphaned records)

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
üìå –î—É–±–ª–∏–∫–∞—Ç—ã –ø–æ slug:
   ‚úÖ –î—É–±–ª–∏–∫–∞—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

üìå –°–∏—Ä–æ—Ç—ã (orphaned records):
   –ú–æ–¥–µ–ª–∏ –±–µ–∑ –º–∞—Ä–æ–∫: 0
   –ü–æ–∫–æ–ª–µ–Ω–∏—è –±–µ–∑ –º–æ–¥–µ–ª–µ–π: 0
   Insights –±–µ–∑ –º–æ–¥–µ–ª–µ–π: 0
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
DATABASE_URL="..." node scripts/check-vehicle-duplicates.mjs
```

---

### 3. `generateVehicleSeed.mjs`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL seed —Ñ–∞–π–ª–∞ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º >= 1980

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- –ß–∏—Ç–∞–µ—Ç `vehicles_full_enriched2.json`
- –§–∏–ª—å—Ç—Ä—É–µ—Ç –º–æ–¥–µ–ª–∏ >= 1980 –≥–æ–¥–∞
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `vehicles_seed.sql`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ UUID (–Ω–∞ –æ—Å–Ω–æ–≤–µ slug)
- –î–æ–±–∞–≤–ª—è–µ—Ç `on conflict do nothing` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
‚úÖ Generated vehicles_seed.sql

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
   –í—Å–µ–≥–æ –º–∞—Ä–æ–∫ –≤ JSON:        512
   –í—Å–µ–≥–æ –º–æ–¥–µ–ª–µ–π –≤ JSON:      8943

   ‚úÖ –ú–∞—Ä–æ–∫ >= 1980:           245
   ‚úÖ –ú–æ–¥–µ–ª–µ–π >= 1980:         3421
   ‚úÖ –ü–æ–∫–æ–ª–µ–Ω–∏–π >= 1980:       8932

   ‚è≠Ô∏è  –ü—Ä–æ–ø—É—â–µ–Ω–æ –º–∞—Ä–æ–∫:        267 (–Ω–µ—Ç –º–æ–¥–µ–ª–µ–π >= 1980)
   ‚è≠Ô∏è  –ü—Ä–æ–ø—É—â–µ–Ω–æ –º–æ–¥–µ–ª–µ–π:      5522 (< 1980)
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
node scripts/generateVehicleSeed.mjs
```

---

### 4. `sync-vehicles-master.mjs`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–∞—Å—Ç–µ—Ä-—Å–∫—Ä–∏–ø—Ç, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –≤—Å–µ —ç—Ç–∞–ø—ã

**–§–ª–∞–≥–∏:**

- `--skip-analysis` - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑
- `--skip-duplicates` - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- `--apply` - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫ –ë–î
- `--dry-run` - –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ, –Ω–æ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –¢–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
node scripts/sync-vehicles-master.mjs

# –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
node scripts/sync-vehicles-master.mjs --apply

# Dry run (–ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ)
node scripts/sync-vehicles-master.mjs --apply --dry-run

# –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º (–±–µ–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫)
node scripts/sync-vehicles-master.mjs --skip-analysis --skip-duplicates --apply
```

---

### 5. `vehicle_i18n_normalize.mjs`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–µ—Ä–µ–≤–æ–¥ —Ä—É—Å—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- –ù–∞—Ö–æ–¥–∏—Ç –∑–∞–ø–∏—Å–∏ —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π –≤ `name_en`
- –ü–µ—Ä–µ–≤–æ–¥–∏—Ç RU -> EN —á–µ—Ä–µ–∑ AI (OpenAI –∏–ª–∏ Google)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π RU –≤ `*_i18n` —Ç–∞–±–ª–∏—Ü—ã
- –û–±–Ω–æ–≤–ª—è–µ—Ç `name_en` –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

```bash
DATABASE_URL="..."
OPENAI_API_KEY="sk-..."          # –∏–ª–∏
GOOGLE_API_KEY="..."
DRY_RUN=true                      # –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
DATABASE_URL="..." OPENAI_API_KEY="..." node scripts/vehicle_i18n_normalize.mjs
```

---

### 6. `vehicle_i18n_expand.mjs`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã (pros, cons, tips) –Ω–∞ –≤—Å–µ —è–∑—ã–∫–∏

**–ß—Ç–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è:**

- `summary` (–æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–∫–æ–ª–µ–Ω–∏—è)
- `pros` (–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞)
- `cons` (–Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏)
- `inspection_tips` (—Å–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ)
- `common_issues` (—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã)

**–¶–µ–ª–µ–≤—ã–µ —è–∑—ã–∫–∏:** EN, RU, NL, FR, DE

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

```bash
DATABASE_URL="..."
GOOGLE_API_KEY="..."              # –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ
OPENAI_API_KEY="..."              # fallback
ONLY_MAKES="bmw,audi"             # —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–∞—Ä–∫–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
LIMIT_ROWS=100                     # –ª–∏–º–∏—Ç –∑–∞–ø–∏—Å–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
DRY_RUN=true                      # –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –í—Å–µ –º–∞—Ä–∫–∏
DATABASE_URL="..." GOOGLE_API_KEY="..." node scripts/vehicle_i18n_expand.mjs

# –¢–æ–ª—å–∫–æ BMW –∏ Audi
DATABASE_URL="..." GOOGLE_API_KEY="..." ONLY_MAKES="bmw,audi" node scripts/vehicle_i18n_expand.mjs

# –ü–µ—Ä–≤—ã–µ 100 –∑–∞–ø–∏—Å–µ–π (–¥–ª—è —Ç–µ—Å—Ç–∞)
DATABASE_URL="..." GOOGLE_API_KEY="..." LIMIT_ROWS=100 DRY_RUN=true node scripts/vehicle_i18n_expand.mjs
```

---

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ

```bash
# PostgreSQL connection string
DATABASE_URL="postgresql://postgres:PASSWORD@HOST:5432/postgres"

# –∏–ª–∏
SUPABASE_DB_URL="postgresql://postgres.PROJECT_REF:PASSWORD@HOST:5432/postgres"
```

### –î–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# OpenAI (–¥–ª—è normalize)
OPENAI_API_KEY="sk-..."
OPENAI_MODEL="gpt-4o-mini"        # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

# Google Gemini (–¥–ª—è expand, –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ)
GOOGLE_API_KEY="AIza..."
GOOGLE_MODEL="gemini-1.5-flash-latest"  # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
GOOGLE_API_VERSION="v1"            # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

### SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

```bash
PGSSL_REJECT_UNAUTHORIZED="false"  # –¥–ª—è self-signed certificates
PGSSLROOTCERT="/path/to/ca.crt"
PG_KEEPALIVE="true"
PG_KEEPALIVE_DELAY_MS="10000"
```

---

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

```bash
# 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º seed
node scripts/generateVehicleSeed.mjs

# 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º vehicles_seed.sql
head -n 50 vehicles_seed.sql

# 3. –ü—Ä–∏–º–µ–Ω—è–µ–º
node scripts/runSeed.mjs ./vehicles_seed.sql

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
node scripts/analyze-vehicle-sync.mjs
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
node scripts/analyze-vehicle-sync.mjs

# 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
node scripts/check-vehicle-duplicates.mjs

# 3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π seed
node scripts/generateVehicleSeed.mjs

# 4. –ü—Ä–∏–º–µ–Ω—è–µ–º (–Ω–∞ –æ—Å–Ω–æ–≤–µ on conflict do nothing –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ)
node scripts/runSeed.mjs ./vehicles_seed.sql
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –¢–æ–ª—å–∫–æ –ø–µ—Ä–µ–≤–æ–¥—ã

```bash
# 1. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (RU -> EN –≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö)
DATABASE_URL="..." OPENAI_API_KEY="..." node scripts/vehicle_i18n_normalize.mjs

# 2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã (pros, cons, tips)
DATABASE_URL="..." GOOGLE_API_KEY="..." node scripts/vehicle_i18n_expand.mjs
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ production

```bash
# 1. Dry run –¥–ª—è –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
node scripts/sync-vehicles-master.mjs --dry-run

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –º–∞—Ä–æ–∫
DATABASE_URL="..." GOOGLE_API_KEY="..." \
  ONLY_MAKES="bmw,mercedes-benz,volkswagen" \
  LIMIT_ROWS=50 \
  DRY_RUN=true \
  node scripts/vehicle_i18n_expand.mjs
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **ON CONFLICT DO NOTHING** - –≤—Å–µ INSERT –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç—É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é, –ø–æ—ç—Ç–æ–º—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑–æ–ø–∞—Å–µ–Ω
2. **–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ UUID** - UUID –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ slug, –ø–æ—ç—Ç–æ–º—É –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–ª—è –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –¥–∞–Ω–Ω—ã—Ö
3. **–ù–µ—Ç DELETE –æ–ø–µ—Ä–∞—Ü–∏–π** - —Å–∫—Ä–∏–ø—Ç—ã —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ, –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–¥–∞–ª—è—é—Ç

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

1. **–ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã** - `vehicles_seed.sql` –º–æ–∂–µ—Ç –±—ã—Ç—å > 50MB
2. **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 5-15 –º–∏–Ω—É—Ç
3. **–ü–µ—Ä–µ–≤–æ–¥—ã** - AI –ø–µ—Ä–µ–≤–æ–¥—ã –º–µ–¥–ª–µ–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `LIMIT_ROWS` –¥–ª—è —Ç–µ—Å—Ç–∞

### –°—Ç–æ–∏–º–æ—Å—Ç—å API

1. **OpenAI** - ~$0.001 –∑–∞ 1000 —Ç–æ–∫–µ–Ω–æ–≤ (gpt-4o-mini)
2. **Google Gemini** - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier: 15 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
3. **–û—Ü–µ–Ω–∫–∞** - –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ ~3000 –º–æ–¥–µ–ª–µ–π ‚âà $5-10

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "DATABASE_URL is required"

**–†–µ—à–µ–Ω–∏–µ:**

```bash
export DATABASE_URL="postgresql://..."
# –∏–ª–∏
export SUPABASE_DB_URL="postgresql://..."
```

### –ü—Ä–æ–±–ª–µ–º–∞: SSL certificate error

**–†–µ—à–µ–Ω–∏–µ:**

```bash
export PGSSL_REJECT_UNAUTHORIZED="false"
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î—É–±–ª–∏–∫–∞—Ç—ã –≤ –ë–î

**–†–µ—à–µ–Ω–∏–µ:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `check-vehicle-duplicates.mjs` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
2. –ù–∞–π–¥–∏—Ç–µ –¥—É–±–ª–∏–∫–∞—Ç—ã –≤ –≤—ã–≤–æ–¥–µ
3. –£–¥–∞–ª–∏—Ç–µ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Supabase Dashboard –∏–ª–∏ SQL:

```sql
-- –ü—Ä–∏–º–µ—Ä —É–¥–∞–ª–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–∞ –º–æ–¥–µ–ª–∏
DELETE FROM vehicle_models WHERE id = 'duplicate-uuid-here';
```

### –ü—Ä–æ–±–ª–µ–º–∞: AI API –ª–∏–º–∏—Ç—ã

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ LIMIT_ROWS –¥–ª—è –±–∞—Ç—á–µ–π
LIMIT_ROWS=100 node scripts/vehicle_i18n_expand.mjs
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–∞—Ä–æ–∫
ONLY_MAKES="bmw" node scripts/vehicle_i18n_expand.mjs
ONLY_MAKES="audi" node scripts/vehicle_i18n_expand.mjs
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
‚úÖ –ú–∞—Ä–æ–∫ >= 1980:           ~245
‚úÖ –ú–æ–¥–µ–ª–µ–π >= 1980:         ~3400
‚úÖ –ü–æ–∫–æ–ª–µ–Ω–∏–π:               ~8900
‚úÖ Insights:                ~3400

–ü–µ—Ä–µ–≤–æ–¥—ã:
‚úÖ makes (ru):              ~245
‚úÖ makes (en):              ~245
‚úÖ makes (nl/fr/de):        ~245

‚úÖ models (ru):             ~3400
‚úÖ models (en):             ~3400
‚úÖ models (nl/fr/de):       ~3400

‚úÖ generations (all):       ~8900 (summary, pros, cons, tips)
```

---

## üìù Checklist –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- [ ] 1. –°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] 2. –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] 3. generateVehicleSeed.mjs –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω (—Ñ–∏–ª—å—Ç—Ä >= 1980)
- [ ] 4. vehicles_seed.sql —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] 5. Seed –ø—Ä–∏–º–µ–Ω—ë–Ω –∫ –ë–î
- [ ] 6. –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- [ ] 7. –ü–µ—Ä–µ–≤–æ–¥—ã (normalize) –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] 8. –ü–µ—Ä–µ–≤–æ–¥—ã (expand) –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] 9. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –≤—Å–µ –º–∞—Ä–∫–∏/–º–æ–¥–µ–ª–∏ –≤ –ë–î
- [ ] 10. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–∞–π—Ç–µ: dropdown —Å –º–∞—Ä–∫–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `seed/vehicles_full_enriched2.json` - –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `scripts/generateVehicleSeed.mjs` - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä seed
- `scripts/vehicle_i18n_normalize.mjs` - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è RU->EN
- `scripts/vehicle_i18n_expand.mjs` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã
- `scripts/analyze-vehicle-sync.mjs` - –∞–Ω–∞–ª–∏–∑
- `scripts/check-vehicle-duplicates.mjs` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- `scripts/sync-vehicles-master.mjs` - –º–∞—Å—Ç–µ—Ä-—Å–∫—Ä–∏–ø—Ç
- `supabase/migrations/20251026193200_vehicle_catalog.sql` - —Å—Ö–µ–º–∞ –ë–î
- `supabase/migrations/20251026230000_add_vehicle_i18n.sql` - i18n —Ç–∞–±–ª–∏—Ü—ã

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `logs/vehicle_i18n_*.csv`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã —Å `DRY_RUN=true` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0
**–î–∞—Ç–∞:** 2025-11-02

---

## üîó Related Docs

**Development:** [VEHICLE_DATA_COMPLETION.md](./VEHICLE_DATA_COMPLETION.md) ‚Ä¢ [VEHICLE_SYNC_FINAL_REPORT.md](./VEHICLE_SYNC_FINAL_REPORT.md)
**Catalog:** [CATALOG_IMPLEMENTATION_STATUS.md](../catalog/CATALOG_IMPLEMENTATION_STATUS.md) ‚Ä¢ [CATALOG_MASTER.md](../catalog/CATALOG_MASTER.md) ‚Ä¢ [FINAL_COMPLETION_REPORT.md](../catalog/FINAL_COMPLETION_REPORT.md)
