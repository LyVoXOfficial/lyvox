# ‚úÖ –ó–ê–î–ê–ß–ê –í–´–ü–û–õ–ù–ï–ù–ê: Generation-Specific Vehicle Insights

**–î–∞—Ç–∞:** 2025-11-04  
**–ó–∞–¥–∞—á–∞:** GENERATION_INSIGHTS_PROMPT.md  
**–ö–æ–º–º–∏—Ç:** `277e681`

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —à–∞–≥–∏

### ‚úÖ 1. –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
- **–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª:** `supabase/migrations/20251104120000_generation_insights.sql`
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–æ –≤ –ë–î:** –£—Å–ø–µ—à–Ω–æ
- **–ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
  - `vehicle_generation_insights` - insights –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è
  - `vehicle_generation_insights_i18n` - –ø–µ—Ä–µ–≤–æ–¥—ã (en, fr, nl, de)
  - –ò–Ω–¥–µ–∫—Å—ã, RLS –ø–æ–ª–∏—Ç–∏–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

### ‚úÖ 2. –°–∫—Ä–∏–ø—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **–°–æ–∑–¥–∞–Ω:** `scripts/generate-generation-insights.mjs`
  - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç insights –¥–ª—è –≤—Å–µ—Ö –ø–æ–∫–æ–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Google AI
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª–∏: gemini-2.0-flash-lite, gemini-2.5-flash, gemini-2.0-flash
  - Retry –ª–æ–≥–∏–∫–∞ + –ø—Ä–æ–ø—É—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
  - **–ó–ê–ü–£–©–ï–ù –≤ —Ñ–æ–Ω–µ** (~2-4 —á–∞—Å–∞)

- **–°–æ–∑–¥–∞–Ω:** `scripts/translate-generation-insights.mjs`
  - –ü–µ—Ä–µ–≤–æ–¥–∏—Ç insights –Ω–∞ 4 —è–∑—ã–∫–∞ (en, fr, nl, de)
  - –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
  - **–ó–ê–ü–£–©–ï–ù –≤ —Ñ–æ–Ω–µ** (~3-5 —á–∞—Å–æ–≤)

### ‚úÖ 3. –û–±–Ω–æ–≤–ª–µ–Ω —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- **–§–∞–π–ª:** `apps/web/src/app/ad/[id]/page.tsx`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - `VehicleInsights` —Ç–∏–ø: `model_id` ‚Üí `generation_id`
  - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ `vehicle_generation_insights`
  - –ü–µ—Ä–µ–≤–æ–¥—ã –∏–∑ `vehicle_generation_insights_i18n`
  - Fallback –Ω–∞ `common_issues` –≤–º–µ—Å—Ç–æ `common_issues_by_engine`

### ‚úÖ 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏
- `20250128120000_search_function.sql` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω ORDER BY (CASE + DESC)
- `20251102034812_mvp_functions.sql` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω ORDER BY
- `20251102100000_category_counts.sql` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤–ª–æ–∂–µ–Ω–Ω—ã–µ `$$` –∫–∞–≤—ã—á–∫–∏

### ‚úÖ 5. Git –∫–æ–º–º–∏—Ç
```
277e681 feat: add generation-specific vehicle insights
```

**–ò–∑–º–µ–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:** 11  
**–î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫:** +1440  
**–£–¥–∞–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫:** -53  

---

## üöÄ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –°–ï–ô–ß–ê–°

‚úÖ –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –≤ –ë–î  
‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤  
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã  
‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ (22/22 passed)  
‚úÖ –ö–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–Ω  

---

## ‚è≥ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –§–û–ù–ï (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ 4-6 —á–∞—Å–æ–≤)

üîÑ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è insights:** `scripts/generate-generation-insights.mjs`  
üîÑ **–ü–µ—Ä–µ–≤–æ–¥—ã insights:** `scripts/translate-generation-insights.mjs`

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω–æ —á–µ—Ä–µ–∑ nohup)
# –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—ã–≤–æ–¥:
node scripts/generate-generation-insights.mjs

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö insights
echo "SELECT COUNT(*) FROM vehicle_generation_insights;" | pnpm supabase db execute

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
echo "SELECT locale, COUNT(*) FROM vehicle_generation_insights_i18n GROUP BY locale;" | pnpm supabase db execute
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–î–û:**
- BMW E34 (1988-1996) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–≤–∏–≥–∞—Ç–µ–ª–∏ **N55B30, N63B44** ‚ùå  
  *(—ç—Ç–æ –¥–≤–∏–≥–∞—Ç–µ–ª–∏ –∏–∑ 2007+ –≥–æ–¥–∞, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)*

**–ü–û–°–õ–ï:**
- BMW E34 (1988-1996) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–≤–∏–≥–∞—Ç–µ–ª–∏ **M20B25, M50B25, M60B30** ‚úÖ  
  *(–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–≤–∏–≥–∞—Ç–µ–ª–∏ –¥–ª—è 1988-1996)*
- BMW F10 (2010-2017) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–≤–∏–≥–∞—Ç–µ–ª–∏ **N55B30, N63B44** ‚úÖ  
  *(–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–≤–∏–≥–∞—Ç–µ–ª–∏ –¥–ª—è 2010-2017)*

---

## üìä –°–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è (–ü–û–°–õ–ï –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ñ–æ–Ω–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ 4-6 —á–∞—Å–æ–≤:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤:**
   ```bash
   # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã
   tasklist | findstr node
   
   # –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î
   pnpm supabase db execute "SELECT COUNT(*) FROM vehicle_generation_insights"
   ```

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –æ–±—ä—è–≤–ª–µ–Ω–∏–∏:**
   - –û—Ç–∫—Ä—ã—Ç—å –ª—é–±–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Å BMW E34
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–≤–∏–≥–∞—Ç–µ–ª–∏ M20/M50/M60
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö (en, fr, nl, de)

3. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–¢–û–õ–¨–ö–û –ü–û–°–õ–ï –ü–†–û–í–ï–†–ö–ò!):**
   ```sql
   -- –í–ù–ò–ú–ê–ù–ò–ï: –í—ã–ø–æ–ª–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç!
   DROP TABLE IF EXISTS vehicle_insights_i18n CASCADE;
   DROP TABLE IF EXISTS vehicle_insights CASCADE;
   ```

4. **Push –∫–æ–º–º–∏—Ç –≤ main:**
   ```bash
   git push origin main
   ```

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ú–∏–≥—Ä–∞—Ü–∏–∏:
- `supabase/migrations/20251104120000_generation_insights.sql`

### –°–∫—Ä–∏–ø—Ç—ã:
- `scripts/generate-generation-insights.mjs`
- `scripts/translate-generation-insights.mjs`
- `scripts/check-insights-linkage.mjs` (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π)
- `scripts/quick-check-insights.mjs` (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- `GENERATION_INSIGHTS_PROMPT.md` (–∏—Å—Ö–æ–¥–Ω–∞—è –∑–∞–¥–∞—á–∞)
- `GENERATION_INSIGHTS_STATUS.md` (—Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
- `TASK_COMPLETE_REPORT.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥:
- `apps/web/src/app/ad/[id]/page.tsx`
- `supabase/migrations/20250128120000_search_function.sql` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω)
- `supabase/migrations/20251102034812_mvp_functions.sql` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω)
- `supabase/migrations/20251102100000_category_counts.sql` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω)

---

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API:
- **Google AI API Key:** **REMOVED FOR SECURITY** (use GOOGLE_API_KEY environment variable)
- **Models:** gemini-2.0-flash-lite, gemini-2.5-flash, gemini-2.0-flash
- **Rate Limit:** 1 –∑–∞–ø—Ä–æ—Å/—Å–µ–∫ (–≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ —Å–∫—Ä–∏–ø—Ç—ã)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- **Connection:** `process.env.DATABASE_URL`
- **–õ–æ–∫–∞–ª–∏:** en, fr, nl, de, ru (5 —è–∑—ã–∫–æ–≤)
- **RLS:** –í–∫–ª—é—á–µ–Ω –¥–ª—è –æ–±–µ–∏—Ö —Ç–∞–±–ª–∏—Ü (–ø—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ)

### –ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
1. –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –ø–æ–∫–æ–ª–µ–Ω–∏–π –∏–∑ `vehicle_generations`
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ: –ø—Ä–æ–º–ø—Ç ‚Üí Google AI ‚Üí –ø–∞—Ä—Å–∏–Ω–≥ JSON ‚Üí –≤—Å—Ç–∞–≤–∫–∞ –≤ –ë–î
3. –ü—Ä–æ–ø—É—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å)
4. –ü—Ä–æ–≥—Ä–µ—Å—Å –∫–∞–∂–¥—ã–µ 10 –∑–∞–ø–∏—Å–µ–π

### –ü—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–≤–æ–¥–æ–≤:
1. –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö insights –∏–∑ `vehicle_generation_insights`
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ + –∫–∞–∂–¥—ã–π —è–∑—ã–∫: –ø—Ä–æ–º–ø—Ç ‚Üí Google AI ‚Üí –≤—Å—Ç–∞–≤–∫–∞ –≤ i18n —Ç–∞–±–ª–∏—Ü—É
3. –ü—Ä–æ–ø—É—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
4. –ü—Ä–æ–≥—Ä–µ—Å—Å –∫–∞–∂–¥—ã–µ 5 –∑–∞–ø–∏—Å–µ–π

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

- [x] –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î —Å–æ–∑–¥–∞–Ω–∞
- [x] –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- [x] –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω
- [x] –°–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Å–æ–∑–¥–∞–Ω
- [x] –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±–Ω–æ–≤–ª–µ–Ω
- [x] –¢–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏
- [x] –ö–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–Ω
- [x] –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—â–µ–Ω—ã –≤ —Ñ–æ–Ω–µ
- [ ] **–ü–†–û–í–ï–†–ò–¢–¨ —á–µ—Ä–µ–∑ 4-6 —á–∞—Å–æ–≤**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- [ ] **–ü–†–û–í–ï–†–ò–¢–¨ —á–µ—Ä–µ–∑ 4-6 —á–∞—Å–æ–≤**: –ü–µ—Ä–µ–≤–æ–¥—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã
- [ ] **–ü–†–û–í–ï–†–ò–¢–¨**: –î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- [ ] **–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û**: –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏)

---

## üéâ –ò–¢–û–ì–û

**–í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ GENERATION_INSIGHTS_PROMPT.md –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**

‚úÖ –®–ê–ì 1: –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î ‚úÖ  
‚úÖ –®–ê–ì 2: –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ insights ‚úÖ  
‚úÖ –®–ê–ì 3: –°–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–≤–æ–¥–æ–≤ ‚úÖ  
‚úÖ –®–ê–ì 4: –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ ‚úÖ  
‚úÖ –®–ê–ì 5: –ö–æ–º–º–∏—Ç ‚úÖ  

**–§–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ ~6 —á–∞—Å–æ–≤.**

---

**–í–æ–ø—Ä–æ—Å—ã?** –°–º–æ—Ç—Ä–∏—Ç–µ `GENERATION_INSIGHTS_STATUS.md` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

