# üöÄ Generation Insights - –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
- **–§–∞–π–ª:** `supabase/migrations/20251104120000_generation_insights.sql`
- **–°—Ç–∞—Ç—É—Å:** –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
- **–¢–∞–±–ª–∏—Ü—ã:**
  - `vehicle_generation_insights` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å insights –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è
  - `vehicle_generation_insights_i18n` - –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ 5 —è–∑—ã–∫–æ–≤ (en, fr, nl, de, ru)

### 2. ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã
- **`scripts/generate-generation-insights.mjs`** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è insights –¥–ª—è –≤—Å–µ—Ö –ø–æ–∫–æ–ª–µ–Ω–∏–π
- **`scripts/translate-generation-insights.mjs`** - –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ 4 —è–∑—ã–∫–∞

### 3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- **–§–∞–π–ª:** `apps/web/src/app/ad/[id]/page.tsx`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –¢–∏–ø `VehicleInsights` –æ–±–Ω–æ–≤–ª–µ–Ω: `model_id` ‚Üí `generation_id`
  - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ `vehicle_generation_insights` –≤–º–µ—Å—Ç–æ `vehicle_insights`
  - –ü–µ—Ä–µ–≤–æ–¥—ã –∏–∑ `vehicle_generation_insights_i18n`

### 4. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ `20250128120000_search_function.sql`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ `20251102034812_mvp_functions.sql`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ `$$` –≤ `20251102100000_category_counts.sql`

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å—ã –≤ —Ä–∞–±–æ—Ç–µ

### ‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è insights –¥–ª—è –≤—Å–µ—Ö –ø–æ–∫–æ–ª–µ–Ω–∏–π
- **–°–∫—Ä–∏–ø—Ç:** `scripts/generate-generation-insights.mjs`
- **–°—Ç–∞—Ç—É—Å:** –ó–∞–ø—É—â–µ–Ω –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~2-4 —á–∞—Å–∞
- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
  - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –ø–æ–∫–æ–ª–µ–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∏–∑ –ë–î
  - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ Google AI:
    - –ü–ª—é—Å—ã (3-5)
    - –ú–∏–Ω—É—Å—ã (3-5)
    - –°–æ–≤–µ—Ç—ã –ø–æ –æ—Å–º–æ—Ç—Ä—É (4-6)
    - –ü—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ (3-5)
    - –ü—Ä–∏–º–µ—Ä—ã –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π (3-5 –∫–æ–¥–æ–≤, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è)
    - –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (3-5)
    - –û—Ü–µ–Ω–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ (1-10)
    - –û—Ü–µ–Ω–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ (1-10)
  - –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏

### ‚è≥ –ü–µ—Ä–µ–≤–æ–¥—ã insights
- **–°–∫—Ä–∏–ø—Ç:** `scripts/translate-generation-insights.mjs`
- **–°—Ç–∞—Ç—É—Å:** –ó–∞–ø—É—â–µ–Ω –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~3-5 —á–∞—Å–æ–≤
- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
  - –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –≤—Å–µ insights —Å —Ä—É—Å—Å–∫–æ–≥–æ –Ω–∞:
    - English (en)
    - French (fr)
    - Dutch (nl)
    - German (de)
  - –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:

### **–î–û:**
```
BMW 5-series E34 (1988-1996)
–î–≤–∏–≥–∞—Ç–µ–ª–∏: N55B30, N63B44 ‚ùå (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - —ç—Ç–æ –¥–≤–∏–≥–∞—Ç–µ–ª–∏ 2007+)
```

### **–ü–û–°–õ–ï:**
```
BMW 5-series E34 (1988-1996)
–î–≤–∏–≥–∞—Ç–µ–ª–∏: M20B25, M50B25, M60B30 ‚úÖ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –¥–≤–∏–≥–∞—Ç–µ–ª–∏ 1988-1996)

BMW 5-series F10 (2010-2017)
–î–≤–∏–≥–∞—Ç–µ–ª–∏: N55B30, N63B44 ‚úÖ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –¥–≤–∏–≥–∞—Ç–µ–ª–∏ 2010-2017)
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ñ–æ–Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—á–µ—Ä–µ–∑ 4-6 —á–∞—Å–æ–≤):

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –ø–æ–∫–æ–ª–µ–Ω–∏—è –∏–º–µ—é—Ç insights
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–µ—Ä–µ–≤–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
5. ‚ö†Ô∏è **–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û:** –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã `vehicle_insights` –∏ `vehicle_insights_i18n` (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏)

---

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ–ª—å–∫–æ insights —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ:
```sql
SELECT COUNT(*) FROM vehicle_generation_insights;
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≥–æ—Ç–æ–≤–æ:
```sql
SELECT locale, COUNT(*) 
FROM vehicle_generation_insights_i18n 
GROUP BY locale;
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:
```sql
SELECT 
  vg.code,
  vm.name_en,
  vmk.name,
  vgi.engine_examples,
  vgi.reliability_score
FROM vehicle_generation_insights vgi
JOIN vehicle_generations vg ON vg.id = vgi.generation_id
JOIN vehicle_models vm ON vm.id = vg.model_id
JOIN vehicle_makes vmk ON vmk.id = vm.make_id
WHERE vmk.name = 'BMW' AND vm.name_en LIKE '%5%'
ORDER BY vg.start_year;
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

- Google API Key: **REMOVED FOR SECURITY** (set via GOOGLE_API_KEY env var)
- Rate limit: 1 –∑–∞–ø—Ä–æ—Å –≤ —Å–µ–∫—É–Ω–¥—É (–≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ —Å–∫—Ä–∏–ø—Ç—ã)
- –°–∫—Ä–∏–ø—Ç—ã –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å - –æ–Ω–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
- –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ—Ä–≤–∞–ª—Å—è - –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏ Google AI:
1. `gemini-2.0-flash-lite` (–ø–µ—Ä–≤—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. `gemini-2.5-flash` (—Ä–µ–∑–µ—Ä–≤–Ω–∞—è)
3. `gemini-2.0-flash` (—Ä–µ–∑–µ—Ä–≤–Ω–∞—è)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü:

**vehicle_generation_insights:**
- `generation_id` (PRIMARY KEY, FK ‚Üí vehicle_generations)
- `pros` (TEXT[])
- `cons` (TEXT[])
- `inspection_tips` (TEXT[])
- `notable_features` (TEXT[])
- `engine_examples` (TEXT[])
- `common_issues` (TEXT[])
- `reliability_score` (INTEGER 1-10)
- `popularity_score` (INTEGER 1-10)

**vehicle_generation_insights_i18n:**
- `generation_id` (FK ‚Üí vehicle_generation_insights)
- `locale` (TEXT: en/fr/nl/de/ru)
- –í—Å–µ —Ç–µ –∂–µ –ø–æ–ª—è —á—Ç–æ –∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ (–ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–µ)

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-04  
**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–ó–∞–¥–∞—á–∞:** GENERATION_INSIGHTS_PROMPT.md

